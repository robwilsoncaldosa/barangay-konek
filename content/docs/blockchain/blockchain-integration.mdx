---
title: Blockchain Integration
description: Explanation of when and why our system uses blockchain during document request completion.
---

## 🧱 Blockchain Integration in Document Requests

### 📌 Overview
Our system integrates **blockchain technology** to add an additional layer of **security, transparency, and immutability** to the document request process.  
Whenever a document request is **marked as completed** and a **PDF file is uploaded**, the system automatically records a **transaction on the blockchain**.  
This creates a **permanent, tamper-proof verification record** of the document issuance.

---

### ⚙️ When It’s Used
Blockchain recording occurs **only when**:
1. The request status is updated to **“Completed”**.
2. The final **PDF document** is uploaded successfully.
3. The blockchain function `addCertificateRequest()` is called.

This function registers important request details — such as the certificate ID, resident ID, document type, and purpose — into a blockchain transaction.  
The resulting **transaction hash (`tx_hash`)** uniquely identifies the record and is stored in our database for verification purposes.

---

### 🔗 Why We Use Blockchain

| Purpose | Description |
|----------|-------------|
| **Authenticity** | Ensures each issued document is cryptographically verified and cannot be forged. |
| **Transparency** | Provides a verifiable, public record for every issued certificate. |
| **Integrity** | Guarantees that data cannot be modified once recorded. |
| **Trust** | Builds confidence in the legitimacy of issued documents. |
| **Audit Trail** | Creates a clear, traceable log for accountability. |

---

### 🧩 Process Flow

1. A resident requests a document (e.g., Barangay Clearance).  
2. The official processes and approves the request.  
3. When the request is marked **Completed**, the PDF file is uploaded.  
4. The system automatically executes the blockchain transaction using `addCertificateRequest()`.  
5. The blockchain returns a **transaction hash (`tx_hash`)**.  
6. The system:
   - Saves the `tx_hash` in the `mRequest` table in Supabase.  
   - Sends the resident an email containing the file and hash details.

---

### 🧠 Developer Notes

- The blockchain logic is defined in the smart contract and called through the `addCertificateRequest()` function.  
- The `tx_hash` is generated by the blockchain network (e.g., Sepolia).  
- The backend function `updateRequestWithFile()` handles:
  - File upload to Supabase storage.  
  - Database update with `tx_hash`.  
  - Sending the email that includes the blockchain hash.  

---

### 📜 Example Email

Subject: Your Requested Document

Dear Resident,

Your requested document (Barangay Clearance) has been successfully processed.

Purpose: Job Application
Blockchain Transaction Hash: 0x9f6d4a2f1bde9b6f8a4d7...

Please find the attached file below.

Thank you,
Barangay Konek Team

### 🔍 How to Verify the Blockchain Record
Residents can verify their document’s authenticity by checking the blockchain transaction on a blockchain explorer.

- **Sepolia Testnet:**  
https://sepolia.etherscan.io/tx/YOUR_TX_HASH

Replace `<YOUR_TX_HASH>` with the hash provided in the email.

---

### ✅ Summary

- Blockchain is used **only for completed document requests** with uploaded files.  
- It provides **proof of authenticity, security, and traceability**.  
- The transaction hash (`tx_hash`) serves as a **permanent verification link** between the issued document and its blockchain record.
